# Auditoria de Acessibilidade (a11y)

Este documento descreve como executar a auditoria automatizada de acessibilidade (Playwright + axe) localmente e em CI.

Como rodar localmente

- Instale dependências (se ainda não): `npm ci`
- Execute o servidor de desenvolvimento (ou use `npm run start` após `npm run build`)
- Rode o script de auditoria:
  - `npm run test:a11y`

- Saída:
  - Os relatórios são gerados em `artifacts/axe-reports/`
  - `summary.json` apresenta um resumo das páginas auditadas

CI (GitHub Actions)

- Workflow: `.github/workflows/accessibility.yml`

- O job:
  1. Faz checkout do código
  2. Instala dependências (`npm ci`)
  3. Executa `npm run build` e `npm run start` em background
  4. Aguarda `http://localhost:3000` com `wait-on`
  5. Executa `npm run test:a11y`
  6. Faz upload dos relatórios como artifacts

Observações sobre páginas autenticadas

- Auditorias contra páginas protegidas por Clerk exigem um fluxo de login automático (Playwright) ou um usuário de teste com credenciais armazenadas em secrets do repo.

- Recomendo, se necessário:
  - Criar variáveis de ambiente secretas (ex.: A11Y_TEST_EMAIL, A11Y_TEST_PASSWORD) no GitHub.
  - Adaptar `scripts/run-axe.js` para usar Playwright test login steps antes de injetar axe (ou criar um script `scripts/run-axe-auth.js`).

Próximos passos (opcionais)

- Integrar execução de a11y no job de `visual-regression.yml` para rodar ambos em PRs.
- Adicionar o badge de resultado/artefatos ao pipeline de CI ou relatório diário.

